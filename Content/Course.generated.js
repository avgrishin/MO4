// @hash v3-697BDFA54EEAD9939D24554DB8A12E8A42B3C2E1
// Automatically generated by ReactJS.NET. Do not edit, your changes will be overridden.
// Version: 2.2.1 (build 5682fd4) with Babel 6.3.13
// Generated at: 14.04.2016 17:29:25
///////////////////////////////////////////////////////////////////////////////
var Course = React.createClass({
  displayName: "Course",

  render: function render() {
    return React.createElement(
      "tr",
      null,
      React.createElement(
        "td",
        null,
        this.props.data.dt.substr(0, 10).replace(/(\d+)-(\d+)-(\d+)/, '$3.$2.$1')
      ),
      React.createElement(
        "td",
        null,
        this.props.data.s
      ),
      React.createElement(
        "td",
        { className: "ta-r" },
        this.props.data.c.toFixed(4)
      ),
      React.createElement(
        "td",
        { className: "ta-r", style: { color: this.props.data.y < 0 ? 'red' : 'green' } },
        this.props.data.y.toFixed(4)
      )
    );
  }
});

var CourseList = React.createClass({
  displayName: "CourseList",

  render: function render() {
    return React.createElement(
      "table",
      { className: "fp-currency", style: { width: 300 } },
      React.createElement(
        "tbody",
        null,
        this.props.data.map(function (result) {
          return React.createElement(Course, { key: result.s, data: result });
        })
      )
    );
  }
});

var CourseBox = React.createClass({
  displayName: "CourseBox",

  getInitialState: function getInitialState() {
    return { data: this.props.initialData };
  },
  loadCoursesFromServer: function loadCoursesFromServer() {
    $.ajax({
      url: this.props.url,
      dataType: 'json',
      cache: false,
      success: (function (data) {
        this.setState({ data: data });
      }).bind(this),
      error: (function (xhr, status, err) {
        console.error(this.props.url, status, err.toString());
      }).bind(this)
    });
  },
  componentDidMount: function componentDidMount() {
    setInterval(this.loadCoursesFromServer, this.props.pollInterval);
  },
  render: function render() {
    return React.createElement(
      "div",
      null,
      React.createElement(
        "h2",
        null,
        "Курсы валют ЦБ РФ"
      ),
      React.createElement(CourseList, { data: this.state.data })
    );
  }
});